pipeline{
    agent any

    stages{
        // stage("fetch code" ){

        // }
        stage("build & push"){
            steps{
                script{
                   // This step should not normally be used in your script. Consult the inline help for details.
                    withDockerRegistry(credentialsId: 'dockerhub_id') {
                        sh "docker build -t myapp:1.0.0 ."
                        sh "docker tag myapp:1.0.0 adelinau/myapp:1.0.0"
                        sh "docker push adelinau/myapp:1.0.0"
                    }
                }
            }
                
        }
    }
 }
    